# CST 2-3-2 Build

张益铭 车13 2021010552

**注：本人在2023年春季学期已经完成过本题，因此代码及报告均为2023春的版本，未将代码和报告分享过任何人。**

## 算法思路和实现要点

使用类似二叉树的数据结构来存储多叉树，每个节点存储父亲、第一个孩子、左右节点。

左右节点合起来为父亲的多个孩子，该节点的多个孩子用他的长子来记录，即长子负责记录父亲的所有孩子。

读入数据时就进行二叉树的构建，维护节点的父亲、左右孩子信息。全部读完后使用深度优先搜索来更新全局节点的高度和规模，此后高度和规模的维护在移动子树时完成。此外，为了方便更新节点的高度，使用了`levelHeight`数组来存储每一层的最大高度，用来维护父亲节点的高度。

移动子树时，使用类似列表的方式删除子节点，并同时更新高度和规模（不断向上爬树，加减即可）。

## 渐进时间复杂度的分析，包含过程

构建二叉树和初始化高度、规模的复杂度均为$O(n)$；移动树需要$O(1)$的时间，维护父节点需要$O(\log n)$，因此总时间复杂度为$O(m\log n)$。

## 渐进空间复杂度的分析，包含过程

存储nodes的数组需要$O(n)$的空间复杂度，移动和更新树都在nodes数组上操作，updateAll的递归栈最坏需要$O(n)$空间复杂度，因此总的空间复杂度为$O(n)$。

## 遇到的困难和解决方法

设计树的结构。最开始我设计了父亲和孩子两种节点，每个父亲节点存有一个孩子类型的头节点，构建树时不断向头节点插入、删除时只需将对应的子节点从其父节点删除，在更新对应编号的父节点的父指针即可。但这种方式涉及到大量的指针移动，极易造成空指针越界，故重新设计了类似二叉树的方式来存储。

## 估计完成本题所用时间

十小时

## 关于本题的更多感想

无