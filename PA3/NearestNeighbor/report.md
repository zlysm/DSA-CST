# CST 3-3-3 Nearest Neighbor

张益铭  车13  2021010552

## 算法思路和实现要点

- 思路
  - 这道题通过 KD 树结构来处理多维空间中的最近邻查询问题。建树时每次选择当前深度%维度数作为划分维度，按照该维度对数据点进行排序，并将数据点的中位数作为树的根节点
- 实现要点
  - 建树时，每个KDNode存储一个点 `mid`，以及该node拥有的point在每个维度的bound
  - 查询时，递归地在树中遍历，计算当前节点到查询点的距离，并根据节点的范围来决定是否需要搜索对侧子树。如果某个子树的范围与查询点的距离不可能小于当前的最小距离，则剪枝

## 渐进时间复杂度的分析，包含过程

1. 建树

   在每一层都选择一个维度进行排序，递归构建左右子树，总的构建复杂度为O(nlogn)，因为每次划分都会减少问题的规模，构建树的深度为O(logn)

2. 查询

   查询在最坏情况下是O(n)，这是因为在没有剪枝的情况下，可能需要遍历整个树。由于数据随机构建，可认为查询复杂度为O(logn)

因此，总的时间复杂度为O(nlogn+qlogn)，q为查询次数

## 渐进空间复杂度的分析，包含过程

KD树需要存储每个节点的点和该点的范围信息，每个节点需要存储一个d维点和一个大小为2d的bound数组，总体空间复杂度为O(n)


## 遇到的困难和解决方法

主要遇到的问题是第9，10个测试点超时，后来通过优化剪枝得以解决。在每个节点中保存该维度的取值范围，并通过查询点的坐标与范围的关系来决定是否剪枝。

## 估计完成本题所用时间 
7小时

## 关于本题的更多感想

无
